<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A collaborative digital canvas for whiteboards, lessons, and activities.">
  <title>Pinboard â€” Digital Canvas</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <div id="app">

    <!-- Navbar -->
    <nav class="navbar">
      <div class="nav-brand">
        <span class="nav-logo">ğŸ“Œ</span>
        <span class="nav-title">Pinboard</span>
      </div>
      <div class="nav-actions">
        <button class="btn btn-outline" id="btnMyBoards">My Boards</button>
        <button class="btn btn-outline" id="btnJoinBoard">Join Board</button>
        <button class="btn btn-primary" id="btnNewBoard">+ New Board</button>
      </div>
    </nav>

    <!-- Home Screen -->
    <div id="homeScreen" class="screen active">
      <div class="home-hero">
        <h1>Digital canvases for<br>whiteboards &amp; activities</h1>
        <p>Post sticky notes, collaborate live, and build visual boards together.</p>
        <div class="hero-actions">
          <button class="btn btn-pink btn-lg" id="heroMakeBoard">Make a board</button>
          <button class="btn btn-outline btn-lg" id="heroJoin">Join a board</button>
        </div>
      </div>
      <div class="boards-grid" id="boardsGrid"></div>
    </div>

    <!-- Board Screen -->
    <div id="boardScreen" class="screen">
      <div class="board-toolbar">
        <button class="btn btn-ghost" id="btnBack">â† Back</button>
        <div class="board-title-wrap">
          <h2 class="board-title" id="boardTitle" contenteditable="true">Untitled Board</h2>
        </div>
        <div class="toolbar-actions">
          <!-- Collaborators badge -->
          <div class="collab-badge" id="collabBadge" style="display:none">
            <span class="collab-dot"></span>
            <span id="collabCount">1</span> online
          </div>
          <button class="btn btn-ghost" title="Share board" id="btnShare">ğŸ”— Share</button>
          <button class="btn btn-ghost" title="Change background" id="btnBg">ğŸ¨</button>
          <button class="btn btn-pink" id="btnAddPost">+ Add Post</button>
        </div>
      </div>

      <!-- Background picker -->
      <div class="bg-picker" id="bgPicker" style="display:none">
        <span>Background:</span>
        <div class="bg-swatches">
          <div class="bg-swatch" data-bg="#f5f5f5" style="background:#f5f5f5"></div>
          <div class="bg-swatch" data-bg="#e8f5e9" style="background:#e8f5e9"></div>
          <div class="bg-swatch" data-bg="#e3f2fd" style="background:#e3f2fd"></div>
          <div class="bg-swatch" data-bg="#fff9c4" style="background:#fff9c4"></div>
          <div class="bg-swatch" data-bg="#fce4ec" style="background:#fce4ec"></div>
          <div class="bg-swatch" data-bg="#1a1a2e" style="background:#1a1a2e"></div>
          <div class="bg-swatch" data-bg="grid" style="background:#fff url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22><path d=%22M0 40L40 0M-5 5L5-5M35 45L45 35%22 stroke=%22%23ddd%22 stroke-width=%221%22/></svg>')"></div>
          <div class="bg-swatch" data-bg="dots" style="background: radial-gradient(circle, #bbb 1px, transparent 1px) 0 0 / 20px 20px #fff"></div>
        </div>
      </div>

      <!-- Sync banner (guest view) -->
      <div class="sync-banner" id="syncBanner" style="display:none">
        <span>ğŸ”´ Live</span> Collaborating on shared board
        <button class="btn btn-ghost btn-sm" id="btnLeaveRoom">Leave</button>
      </div>

      <!-- Canvas -->
      <div class="canvas" id="canvas"></div>
    </div>

  </div>

  <!-- New Board Modal -->
  <div class="modal-overlay" id="newBoardModal" style="display:none">
    <div class="modal">
      <h3>Create a new board</h3>
      <div class="form-group">
        <label>Board name</label>
        <input type="text" id="newBoardName" placeholder="My awesome board" maxlength="60">
      </div>
      <div class="form-group">
        <label>Layout</label>
        <div class="layout-options">
          <div class="layout-opt selected" data-layout="free">
            <div class="layout-icon">â¬œâ¬œ<br>â¬œâ¬œ</div>
            <span>Free</span>
          </div>
          <div class="layout-opt" data-layout="grid">
            <div class="layout-icon">â–¦</div>
            <span>Grid</span>
          </div>
          <div class="layout-opt" data-layout="list">
            <div class="layout-icon">â˜°</div>
            <span>List</span>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn btn-outline" id="cancelNewBoard">Cancel</button>
        <button class="btn btn-pink" id="confirmNewBoard">Create Board</button>
      </div>
    </div>
  </div>

  <!-- Post Modal -->
  <div class="modal-overlay" id="postModal" style="display:none">
    <div class="modal">
      <h3 id="postModalTitle">New Post</h3>
      <div class="form-group">
        <label>Title (optional)</label>
        <input type="text" id="postTitle" placeholder="Add a title..." maxlength="80">
      </div>
      <div class="form-group">
        <label>Content</label>
        <textarea id="postContent" placeholder="Write something..." rows="4" maxlength="1000"></textarea>
      </div>
      <div class="form-group">
        <label>Color</label>
        <div class="color-swatches" id="colorSwatches">
          <div class="color-swatch selected" data-color="#fff9c4" style="background:#fff9c4"></div>
          <div class="color-swatch" data-color="#f8bbd9" style="background:#f8bbd9"></div>
          <div class="color-swatch" data-color="#bbdefb" style="background:#bbdefb"></div>
          <div class="color-swatch" data-color="#c8e6c9" style="background:#c8e6c9"></div>
          <div class="color-swatch" data-color="#ffe0b2" style="background:#ffe0b2"></div>
          <div class="color-swatch" data-color="#e1bee7" style="background:#e1bee7"></div>
          <div class="color-swatch" data-color="#ffffff" style="background:#ffffff"></div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn btn-ghost btn-danger" id="deletePost" style="display:none">Delete</button>
        <button class="btn btn-outline" id="cancelPost">Cancel</button>
        <button class="btn btn-pink" id="savePost">Save Post</button>
      </div>
    </div>
  </div>

  <!-- Share Modal -->
  <div class="modal-overlay" id="shareModal" style="display:none">
    <div class="modal modal-share">
      <h3>ğŸ”— Share Board</h3>
      <div id="shareSetup">
        <p class="modal-desc">Invite others to collaborate live on this board.</p>
        <button class="btn btn-pink btn-block" id="btnCreateRoom">Generate Join Code</button>
        <div class="sync-note" id="syncNote" style="display:none">
          âš ï¸ Set up Firebase in <code>js/config.js</code> to enable live sync.
          <a href="https://console.firebase.google.com" target="_blank">Get started â†’</a>
        </div>
      </div>
      <div id="shareActive" style="display:none">
        <p class="modal-desc">Share this code or QR with collaborators:</p>
        <div class="room-code" id="roomCodeDisplay">â€”â€”â€”â€”â€”â€”</div>
        <div id="qrcode" class="qr-container"></div>
        <div class="copy-row">
          <input type="text" id="shareLink" readonly>
          <button class="btn btn-outline btn-sm" id="btnCopyLink">Copy</button>
        </div>
        <p class="collab-info">
          <span class="collab-dot"></span>
          <span id="shareCollabCount">1</span> person online
        </p>
      </div>
      <div class="modal-actions">
        <button class="btn btn-outline" id="closeShare">Close</button>
      </div>
    </div>
  </div>

  <!-- Join Modal -->
  <div class="modal-overlay" id="joinModal" style="display:none">
    <div class="modal">
      <h3>ğŸšª Join a Board</h3>
      <p class="modal-desc">Enter the 6-digit code shared with you.</p>
      <div class="form-group">
        <label>Room Code</label>
        <input type="text" id="joinCode" placeholder="123456" maxlength="6"
               pattern="[0-9]*" inputmode="numeric" class="input-code">
      </div>
      <div id="joinError" class="error-msg" style="display:none">
        âŒ Room not found. Check the code and try again.
      </div>
      <div class="modal-actions">
        <button class="btn btn-outline" id="cancelJoin">Cancel</button>
        <button class="btn btn-pink" id="confirmJoin">Join Board</button>
      </div>
    </div>
  </div>

  <!-- Firebase SDK (CDN) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <!-- QR Code generator -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <script src="js/config.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/sync.js"></script>
  <script src="js/board.js"></script>
  <script src="js/post.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
